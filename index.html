<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lernprogramm</title>
    <link rel="stylesheet" href="style.css">

    <script type="text/javascript" src="View.js"></script>
    <script type="text/javascript" src="Presenter.js"></script>
    <script type="text/javascript" src="Model.js"></script>



<script>

var current_question_index = 0; 
var n_correct_answers = 0;
var n_wrong_answers = 0;

function loadDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
     document.getElementById("demo").innerHTML = this.responseText;
    }
  };
  //xhttp.withCredentials = false;
    xhttp.open("GET", "https://irene.informatik.htw-dresden.de/it1/js/ajaxdemo.txt", true);
    xhttp.setRequestHeader( 'Access-Control-Allow-Origin', '*');

  

  
  xhttp.send();
}

async function setup()
{   
    lanswer = document.getElementById("answer_list");
    lquestion = document.getElementById("question_label");
    lstats = document.getElementById("stats_label");
    stopic = document.getElementById("topic_select");
    presenter = new Presenter(null, lanswer, lquestion, lstats, stopic);
    var model = new Model();
    view = new View(model, presenter);
    presenter.view = view;
    view.init();
    //model.load();
    await model.getAllTasks();
    alert(model.questions)
   // setTimeout(()=> 
   // {
      console.log(model.questions);
      let topics = model.getTopics();
    console.log(topics)
    presenter.displayTopicSelection(topics);
    view.on_topic_selected(topics[0]);
    //model.questions = ["a"];
    view.sendTask() ;
   // }, 500);
    console.log(model)
    console.log(model.questions)
    //model.getAllTasks();  
    
}
    </script>
</head>
<body onload="setup();">
    <header>
        <h2>Lernprogramm</h2>
      </header>
      
      <section>
        <nav id="nav">
          <select name="cars" id="topic_select">
            
          </select>
            <div class="dropdown">
                <button class="dropbtn">Dropdown</button>
                <div class="dropdown-content">
                  <a href="#">Link 1</a>
                  <a href="#">Link 2</a>
                  <a href="#">Link 3</a>
                </div>
        </nav>
        
        <article>
          <h1>London</h1>
          <div id="question_label"></div>
    <div id="question_box"></div>
    <label id="stats_label"></label>
    <ul id="answer_list"></ul>
    
      </div>
    
        </article>
      </section>
      
      <footer>
        <p>Footer</p>
      </footer>

    
</body>
</html>